<!DOCTYPE html>
<html>
<head>
    <title>Debug Test Plan Column</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug-section { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .info { color: blue; }
        pre { background: #fff; padding: 10px; border: 1px solid #ddd; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üîç Debug: Test Plan Name Column Issue</h1>
    
    <div class="debug-section">
        <h2>Issue Analysis</h2>
        <p>The "Test Plan Name" column is not appearing in the Test Execution page table, even though:</p>
        <ul>
            <li class="success">‚úÖ The column is properly defined in RealTimeExecutionMonitor.tsx</li>
            <li class="success">‚úÖ The backend API includes test_plan_name field</li>
            <li class="success">‚úÖ Debug logging is in place</li>
        </ul>
    </div>

    <div class="debug-section">
        <h2>Possible Causes</h2>
        <ol>
            <li><strong>Frontend Cache Issue:</strong> The React app hasn't reloaded the updated component</li>
            <li><strong>Build Issue:</strong> The changes weren't compiled into the running frontend</li>
            <li><strong>Component Not Updated:</strong> The file changes didn't take effect</li>
            <li><strong>Browser Cache:</strong> Old JavaScript is cached in the browser</li>
        </ol>
    </div>

    <div class="debug-section">
        <h2>üõ†Ô∏è Troubleshooting Steps</h2>
        
        <h3>Step 1: Check Browser Console</h3>
        <p>Open the Test Execution page and check the browser console (F12) for:</p>
        <pre>
üîç Fetching active executions...
üìä Active executions result: [...]
Execution 1: { plan_id: "...", test_plan_name: "...", ... }
Rendering test plan name: "..." for record: "..."
        </pre>
        
        <h3>Step 2: Force Frontend Reload</h3>
        <p>In your terminal where the frontend is running:</p>
        <pre>
# Stop the frontend (Ctrl+C)
# Then restart it
cd dashboard && npm run dev
        </pre>
        
        <h3>Step 3: Hard Refresh Browser</h3>
        <p>In your browser on the Test Execution page:</p>
        <ul>
            <li><strong>Chrome/Firefox:</strong> Ctrl+Shift+R (or Cmd+Shift+R on Mac)</li>
            <li><strong>Or:</strong> F12 ‚Üí Right-click refresh button ‚Üí "Empty Cache and Hard Reload"</li>
        </ul>
        
        <h3>Step 4: Check Network Tab</h3>
        <p>In browser DevTools ‚Üí Network tab, look for the API call:</p>
        <pre>
GET /api/v1/execution/active
Response should include: { "test_plan_name": "..." }
        </pre>
    </div>

    <div class="debug-section">
        <h2>üîß Quick Fix Verification</h2>
        <p>To verify the column should appear, check that your RealTimeExecutionMonitor.tsx contains:</p>
        <pre>
const columns = [
  {
    title: 'Execution ID',
    // ...
  },
  {
    title: 'Test Plan Name',        ‚Üê This should be present
    dataIndex: 'test_plan_name',
    key: 'test_plan_name',
    // ...
  },
  {
    title: 'Status',
    // ...
  },
  // ...
]
        </pre>
    </div>

    <div class="debug-section">
        <h2>üéØ Expected Result</h2>
        <p>After following the troubleshooting steps, you should see:</p>
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <tr style="background: #f0f0f0;">
                <th>Execution ID</th>
                <th style="background: #e6f7ff;">Test Plan Name</th>
                <th>Status</th>
                <th>Progress</th>
                <th>Started</th>
                <th>ETA</th>
                <th>Actions</th>
            </tr>
            <tr>
                <td>exec-123...</td>
                <td style="background: #e6f7ff; color: #1890ff; font-weight: bold;">‚ú® My Test Plan with Name</td>
                <td>QUEUED</td>
                <td>0%</td>
                <td>10:30:15</td>
                <td>5m</td>
                <td>Monitor</td>
            </tr>
            <tr>
                <td>exec-456...</td>
                <td style="background: #e6f7ff; color: #8c8c8c; font-style: italic;">Direct Execution</td>
                <td>RUNNING</td>
                <td>45%</td>
                <td>10:25:00</td>
                <td>2m</td>
                <td>View</td>
            </tr>
        </table>
    </div>

    <div class="debug-section">
        <h2>üö® If Still Not Working</h2>
        <p>If the column still doesn't appear after the above steps:</p>
        <ol>
            <li>Check if you're looking at the right page (Test Execution, not Execution Monitor)</li>
            <li>Verify the frontend is running on the correct port (usually :3000)</li>
            <li>Check for any JavaScript errors in the console</li>
            <li>Try creating a new test plan and executing it to see if new data shows the column</li>
        </ol>
    </div>

    <script>
        console.log('üîç Debug page loaded. Check the Test Execution page now!');
        console.log('Expected to see "Test Plan Name" column in the Active Test Executions table');
    </script>
</body>
</html>